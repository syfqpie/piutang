<div 
    class="p-8 w-full rounded-xl shadow-xl bg-white dark:bg-neutral-800">
    <h3 class="mb-4 text-2xl text-center font-semibold">
        Create your account
    </h3>

    <form
        [formGroup]="registerForm"
        class="b border-b border-b-neutral-700 pb-4">
        <div class="mb-4 w-full">
            <div
                class="flex group focus-within:outline
                rounded-lg border border-neutral-300 bg-neutral-200
                focus-within:outline-2 focus-within:!outline-emerald-500
                dark:bg-neutral-800 dark:border-neutral-600
                dark:focus-within:!outline-emerald-800
                dark:focus-within:!border-emerald-500
                transition-colors duration-100">
                <span
                    class="inline-flex items-center px-2.5
                    text-sm text-neutral-900 bg-neutral-200
                    rounded-l-lg border-none outline-none
                    dark:bg-neutral-700 dark:text-neutral-500">
                    <i class="fa-solid fa-envelope"></i>
                </span>
                <input
                    type="email"
                    class="block w-full p-2.5 rounded-lg rounded-l-none text-sm
                    border-none outline-none bg-neutral-50 text-neutral-900      
                    dark:bg-neutral-800 dark:text-white
                    dark:placeholder-neutral-400"
                    placeholder="Email"
                    formControlName="email"
                    (keyup.enter)="onSubmit()">
            </div>

            <ng-template
                [ngIf]="registerForm.controls['email'].errors &&
                (registerForm.controls['email'].dirty ||
                registerForm.controls['email'].touched)">
                <ng-container *ngFor="let message of formMessages['email']">
                    <ng-template
                        [ngIf]="registerForm.controls['email'].hasError(message.type) &&
                        (registerForm.controls['email'].dirty ||
                        registerForm.controls['email'].touched)">
                        <p class="mt-2 text-xs text-red-600 dark:text-red-500">
                            <span class="font-medium">Oops!</span>
                            {{ message.message }}
                        </p>
                    </ng-template>
                </ng-container>
            </ng-template>
        </div>

        <div class="mb-4 w-full">
            <div
                class="flex group focus-within:outline
                rounded-lg border border-neutral-300 bg-neutral-200
                focus-within:outline-2 focus-within:!outline-emerald-500
                dark:bg-neutral-800 dark:border-neutral-600
                dark:focus-within:!outline-emerald-800
                dark:focus-within:!border-emerald-500
                transition-colors duration-100">
                <span
                    class="inline-flex items-center px-2.5
                    text-sm text-neutral-900 bg-neutral-200
                    rounded-l-lg border-none outline-none
                    dark:bg-neutral-700 dark:text-neutral-500">
                    <i class="fa-solid fa-lock"></i>
                </span>
                <input
                    type="password"
                    class="block w-full p-2.5 rounded-lg rounded-l-none text-sm
                    border-none outline-none bg-neutral-50 text-neutral-900      
                    dark:bg-neutral-800 dark:text-white
                    dark:placeholder-neutral-400"
                    placeholder="Password"
                    formControlName="password"
                    (keyup.enter)="onSubmit()"
                    [ngClass]="{
                        'is-invalid': registerForm.controls['password'].touched &&
                        registerForm.controls['password'].errors,
                        'is-valid': registerForm.controls['password'].touched &&
                        !registerForm.controls['password'].errors
                    }">
            </div>

            <ng-template
                [ngIf]="registerForm.controls['password'].errors &&
                (registerForm.controls['password'].dirty ||
                registerForm.controls['password'].touched)">
                <ng-container *ngFor="let message of formMessages['password']">
                    <ng-template
                        [ngIf]="registerForm.controls['password'].hasError(message.type) &&
                        (registerForm.controls['password'].dirty ||
                        registerForm.controls['password'].touched)">
                        <p class="mt-2 text-xs text-red-600 dark:text-red-500">
                            <span class="font-medium">Oops!</span>
                            {{ message.message }}
                        </p>
                    </ng-template>
                </ng-container>
            </ng-template>
        </div>

        <div class="mb-0 w-full">
            <button
                type="button"
                class="p-2.5 rounded-lg text-sm font-medium text-center
                w-full text-white bg-emerald-700 hover:bg-emerald-800
                focus:outline focus:outline-2 focus:outline-emerald-300
                dark:bg-emerald-600 dark:hover:bg-emerald-700 border
                focus:border-emerald-500
                dark:focus:border-emerald-500 dark:border-emerald-600 
                dark:focus:outline-emerald-800 disabled:cursor-not-allowed"
                (click)="onSubmit()">
                <span>
                    <i
                        *ngIf="isLoading; else registerText"
                        class="fa-solid fa-circle-notch fa-spin ms-auto">
                    </i>
                    <ng-template #registerText>
                        Create account
                    </ng-template>
                </span>
            </button>
        </div>
    </form>

    <div class="mt-4">
        <p class="text-sm text-center text-neutral-500">Have an account?
            <a 
                class="underline text-emerald-700 hover:text-emerald-900
                dark:text-emerald-700 dark:hover:text-emerald-500"
                [routerLink]="['/auth', 'login']">
                Login
            </a>
        </p>

        <p class="text-sm text-center text-neutral-500">Forgot password?
            <a 
                class="underline text-emerald-700 hover:text-emerald-900
                dark:text-emerald-700 dark:hover:text-emerald-500"
                [routerLink]="['/auth', 'reset']">
                Reset
            </a>
        </p>
    </div>
</div>

<p class="text-sm text-center mt-2 mb-0">
    <a 
        class="text-neutral-500 hover:text-emerald-700
        dark:hover:text-emerald-500"
        href="https://github.com/syfqpie/poket"
        target="_blank">
        <i class="fa-brands fa-github-alt"></i>
        Github repo
    </a>
</p>
